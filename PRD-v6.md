# Todo App v6 — Data & Productivity

Building on the existing Express + React + PostgreSQL todo app (which has todos, subtasks, due dates, priorities, search/filter, export JSON/CSV, inline editing, drag-and-drop reorder, dark/light mode, undo delete with toast, keyboard shortcuts, and sort control).

## Tasks

- [x] Add due date visual indicators: todos that are overdue should display a red "Overdue" badge next to the due date. Todos due today should show an amber "Due Today" badge. Todos due within the next 3 days should show a subtle blue "Due Soon" text. Add an "Overdue" button to the status filter chips (alongside All/Active/Completed) that shows only overdue todos. The overdue filter should query the API with `?status=overdue` and the backend should filter by `due_date < NOW() AND completed = false`. **Verify:** Use the browser to create todos with past due dates, today's date, and near-future dates. Confirm the correct badges appear. Click the "Overdue" filter and confirm only overdue todos are shown.

- [x] Add tags/labels system: create a `tags` table with columns `id SERIAL PRIMARY KEY, name VARCHAR(50) UNIQUE, color VARCHAR(7) DEFAULT '#6366f1'`. Create a `todo_tags` junction table with `todo_id INTEGER REFERENCES todos(id) ON DELETE CASCADE, tag_id INTEGER REFERENCES tags(id) ON DELETE CASCADE, PRIMARY KEY(todo_id, tag_id)`. Add API endpoints: `GET /api/tags` (list all), `POST /api/tags` (create), `POST /api/todos/:id/tags` (add tag to todo), `DELETE /api/todos/:id/tags/:tagId` (remove tag). Update `GET /api/todos` to include tags via a JOIN. In the UI, show small colored tag chips on each todo card. Add a tag input below the todo title that autocompletes from existing tags. **Verify:** Use the browser to create a tag, assign it to a todo, confirm the colored chip appears on the todo card. Create a second todo with the same tag.

- [x] Add tag filtering: add a horizontal scrollable tag filter bar below the existing status/priority/sort filter chips. It should show all existing tags as clickable chips. Clicking a tag filters the todo list to only show todos with that tag (via `?tag=tagName` query param on the API). Multiple tags can be selected (AND logic). Active tag filters should be visually highlighted. Add a small "×" to clear each tag filter. **Verify:** Use the browser to create 3 todos with different tags. Click a tag filter chip and confirm only matching todos are shown. Select two tags and confirm AND filtering works. Click "×" to clear and confirm all todos reappear.

- [x] Add a notes/description field: add a `notes TEXT` column to the `todos` table. Update the PUT `/api/todos/:id` endpoint to accept a `notes` field. In the UI, add a small "notes" icon/indicator next to todos that have notes. Clicking on it (or on an expand arrow) should toggle open a text area below the todo showing the notes content. The text area should be editable — changes save on blur via the PUT API. Empty notes should not show the indicator. **Verify:** Use the browser to click a todo's expand area, type some notes, click outside to blur, reload the page, and confirm the notes persist. Confirm the notes indicator icon only appears on todos that have notes.

- [ ] Add bulk actions: add a checkbox on the left side of each todo (before the drag handle). When one or more checkboxes are selected, show a floating action bar at the bottom of the screen with buttons: "Delete Selected" (with count), "Set Priority" (dropdown: High/Medium/Low), and "Clear Selection". The delete should use the existing undo-toast pattern for each deleted todo. The priority change should call PUT on each selected todo. Add a "Select All" checkbox in the header area. **Verify:** Use the browser to select 2 todos using checkboxes, confirm the action bar appears with the correct count. Click "Set Priority → High" and confirm both todos update. Select all, then click "Clear Selection" and confirm all deselect.

- [ ] Add a progress stats summary bar: add a GET `/api/todos/stats` endpoint that returns `{ total, completed, active, overdue, byPriority: { high, medium, low } }`. Display a compact stats bar between the filter chips and the todo list showing: a progress ring/circle showing completion percentage, and text showing "X of Y completed · Z overdue". The stats should update in real-time as todos are added, completed, or deleted. Use CSS for the progress ring (no chart library needed). Style it to work in both light and dark mode. **Verify:** Use the browser to create 5 todos, complete 2, confirm the stats bar shows "2 of 5 completed" with 40% in the progress ring. Delete one and confirm stats update immediately.
